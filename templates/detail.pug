-extends 'index.pug'
  -load crispy_forms_tags i18n static

block extra_script
  script(src="{% static 'js/vue.js' %}")
  script(src="{% static 'js/superagent.js' %}")
  script(src="{% static 'js/superagent-jsonapify.js' %}")
  script(src="{% static 'js/detail.js' %}")


block content
  #app.editor-container
    .editor

      .left
        h2 DEINE FLÄCHENBIOGRAFIE

        p Fülle die Tabelle aus.
          br
          | Benutze eine neue Zeile, wenn die Wohnfläche oder die Anzahl der Personen wechselt.

        hr

        form#area_bio(method='post')

          #div_id_name.form-group
            label.form-control-label(for='id_name')
              | Name
            div
              input#id_name.textInput.form-control(@change="updateBio", maxlength='150', name='name',
                required='', type='text', v-model='bio.name')
          #div_id_age.form-group
            label.form-control-label(for='id_age')
              | Alter
            div
              input#id_age.textinput.form-control(@change="updateBio", name='age', required='',
                type='number', v-model='bio.age')
          #div_id_country.form-group
            label.form-control-label(for='id_country')
              | Land
            div
              input#id_country.textinput.form-control(@change="updateBio", maxlength='150',
                name='country', required='', type='text', v-model='bio.country')

        hr
        h3 Geburt bis heute
        hr

        table(cellpadding=0, cellspacing=0)
          thead
            td
              -trans 'Living space'
            td
              -trans 'Number of people'
            td
              {% trans 'Timespan' %}
            td
              -trans 'Reason'
            td
              | &nbsp;
          tr(v-for='entry in entries')
            td
              input.textInput.form-control(maxlength='150', name='name', required='',
                type='text', v-model='entry.living_space', @change="updateEntry(entry)")
            td
              input.textInput.form-control(maxlength='150', name='name', required='',
                type='text', v-model='entry.number_of_people', @change='updateEntry(entry)')
            td
              input.textInput.form-control(maxlength='150', name='name', required='',
                type='text', v-model='entry.range')
            td
              input.textInput.form-control(maxlength='150', name='name', required='',
                type='text', v-model='entry.description', @change='updateEntry(entry)')
            td
              i.fa.fa-times
            tr
              td(colspan=5)
                .new-entry
                  i.fa.fa-plus


      .right
        -verbatim
          h3 {{ bio.name | caps }}, {{ bio.age }}, {{ bio.country | caps }}

  script.
    var auth_token = "Token {{ token }}";
    var bio_id = {{ bio.id }};
